modalID: 2
title: MEET FRANKENBOT!
subtitle: The autonomous rescue-bot
preview: meetfrankenbot/frankenbotIsometric.png
description:
  |
    ![alt text](/img/portfolio/meetfrankenbot/frankenbotIsometric.png "Frankenbot")

    ### Here is what Frankenbot can do! 
    
    <br>
      
    #### Tape Follow
    
    Detecting and following black tape was essential for navigating the
    [competition surface] (http://projectlab.engphys.ubc.ca/enph253-2017/competition-2017/),
    from the start line up the ramp and around the water tank.

    **How we did it**  
    ![alt text](/img/portfolio/meetfrankenbot/wheels.png "wheels and gears")   
    The drive system consists of two DC motors connected to gears that rotate the wheels around an axle.  
    Rubber tires (not shown) were used to increase friction, facilitating sharp turns and steep climbs.
    
    ![alt text](/img/portfolio/meetfrankenbot/testingHBridge.png "testing H-bridge")  
    The DC motors were controlled by the TINAH board through an H-bridge circuit.
    
    ![alt text](/img/portfolio/meetfrankenbot/tapefollowing1_400.png "tapefollowing with chassis 1")  
    To detect the black tape, we used QRD reflective sensors that read a low voltage on
    highly reflective surfaces, thereby allowing us to distinguish between the white surface and black tape.
    
    ![alt text](/img/portfolio/meetfrankenbot/qrds.png "QRD reflective sensors")  
    Frankenbot has three pairs of QRDs: one pair in the middle
    for tapefollowing up to the tank, and two more pairs on either side of the robot 
    used for tapefollowing around the tank.
    The two additional pairs of QRDs helped better position the robot around the tank to facilitate
    rescuing the agents on the platforms.  
    
    A software based PID (proportinal-integral-drivative) control was used for navigation along the tape.
    The PID was tuned through extensive testing, from which we found that the effects of 
    integral and derivative control were negligible for this simple system.

    **Main challenges**  
    
    ![alt text](/img/portfolio/meetfrankenbot/tapefollowing2.png "tapefollowing around tank")  
    Traveling around the tank proved to be the biggest challenge due to the short segments of extra tape
    that marked the plank positions. To minimize the risk of the robot traveling down the tape, 
    we tuned the motor speeds around the tank so that the robot would travel around a circular path by default.    
    
    ![alt text](/img/portfolio/meetfrankenbot/securingQRDs.png "securing QRDs")  
    The QRDs also proved to be very sensitive to the positioning, so we had to secure them at their optimal
    heights above the ground.
    
    #### Navigate safely through the Armed Door
    
    ![alt text](/img/portfolio/meetfrankenbot/alarmDoor.png "alarm door")  
    The second door from the startline is an alarm door to prevent intruders from 
    entering the compound. Frankenbot has to determine whether the door is armed or disarmed
    based on the IR signal being emitted from the door (10 kHz indicates armed, 1 kHz indicates disarmed).
        
    **How we did it**  
    Frankenbot's IR detector is composed of a phototransistor, high and band-pass filters, amplifiers,
    and a peak detector.  
    
    ![alt text](/img/portfolio/meetfrankenbot/irphototransistor.png "phototransistor")  
    The phototransistor was installed at the front of the robot, right under where the bucket is sitting,
    to ensure that no part of the robot is blocking the detector.  
    
    ![alt text](/img/portfolio/meetfrankenbot/ircircuit.png "IR detector PCB")  
    The band-pass filter was tuned to allow 1 kHz signal to pass through, producing a detector with a 
    high voltage output for 1 kHz and a low output for 10 kHz.
    The gain of the amplifier was adjusted to increase the sensitivity of the detector even from a 
    distance, while ensuring that the voltage difference between 10 kHz and 1 kHz is significant.
    We succeeded in making a detector that would switch from an output of 0.6V at 10 kHz
    to 5.0V at 1kHz.
    
    **Main challenges**  
    
    ![alt text](/img/portfolio/meetfrankenbot/testingIR.png "testing IR in competition room")  
    The IR levels in the room were affected by the lighting, especially sunlight
    since the intensity of the sunlight would change throughout the day.
    We addressed this issue by testing and tuning the threshold for the IR detector in
    the competition room in advance.  
    
    ![alt text](/img/portfolio/meetfrankenbot/irchallenges.png "testing IR with position")  
    The position of the robot on the competition surface also affected the output from the
    IR detector significantly, as the angle of the phototransistor relative to the signal changed
    and the doors also blocked the signal. To reduce the variation in IR signals detected, 
    we decided to program Frankenbot so that he stops right after the first door
    (which he detects with the red-coloured collision switches on the side of the chassis)
    before detecting the IR signal and making the decision to wait or drive through.
    
    #### Rescue Agents out of Water Tank
    
    ![alt text](/img/portfolio/meetfrankenbot/capturedAgents.png "captured agents")  
    The agents are captured in a water tank! Frankenbot has to rescue them out of the tank
    before they drown!

    ##### Arm
        
    [Click here](https://cad.onshape.com/documents/e98b69ac059f99b30a6500c9/w/1b042e790ec5e8dabe7a7bc1/e/a025136a670819f52d744b4c)
    to see the full design on Onshape
    
    **How we did it**  
    Frankenbot has three servo motors controlling the retrieval arm and claw:
    
    ![alt text](/img/portfolio/meetfrankenbot/armTurntableServo.png "arm turning servo")  
    a turning servo for the left-to-right rotation of the arm, under a turntable;
    
    ![alt text](/img/portfolio/meetfrankenbot/armLifter.png "arm lifting servo")  
    a lifting servo for the up-and-down motion;
    
    ![alt text](/img/portfolio/meetfrankenbot/claw.png "claw servo")  
    and a claw servo for the opening and closing of the claw.  
    The claw has been decorated with rubber bands that help securely grip the agents
    with friction and by molding to the shape of the agents.

    **Main Challenges**  
    
    ![alt text](/img/portfolio/meetfrankenbot/tinahPoweredArm.png "TINAH-powered arm")  
    Initially, we had the servo motors directly connected to the TINAH board,
    only to realize that the TINAH was not able to supply enough current to all three.
    Therefore we prepared voltage regulators for each servo motor, powered directly from the batteries.  
    However, even after powering the servo motors with regulators, the arm and claw continued to 
    flutter and would not stay steady. After consulting an instructor, we learned that
    the problem was caused by a lack of a common ground between the power supply (from the battery)
    and the PWM signals (from the TINAH) fed to the servos. Adding a grounding wire connection
    between the two helped stabilize the arm and claw, and that same day Frankenbot was able to rescue
    his first agent from the tank.
    
    ![alt text](/img/portfolio/meetfrankenbot/armGears.png "arm lifter gears")  
    Another major issue with the arm design was that the strain on the lifting servo
    was enormous. Reducing the torque on the servo with gears were not enough to
    alleviate the strain, so platforms were created to help hold the arm up in place when not being used.
    Still it was evident that the servo motor was fatigued when used continuously.  
    If we were to rebuild the robot, we will redesign the retrieval arm by installing a spring under the arm
    to counter the weight of the claw, shortening the arm, or reducing weight at the claw end.
    
    _How it retrieved agents (show video)_

    ##### Plank Detection
    
    **How we did it**  
    
    ![alt text](/img/portfolio/meetfrankenbot/plankDetectors.png "plank detecting switches")  
    Frankenbot has collision switches with a red polypropylene extension on each side
    to tap the servo motors that are located around the tank
    (these servos control the platforms and are responsible for drowning the agents
    by dropping them into the water).
    The length of the polypropylene "bumpers" were tuned by testing how close the robot chassis was
    from the tank and servos, and trimmed as needed.
    
    **Main Challenges**  
    
    ![alt text](/img/portfolio/meetfrankenbot/tuningPlankDetectors.png "tuning plank detection")  
    The plank detectors were sensitive to any physical change, such as the servo motor mounts being flattened
    against the tank or the robot's turn radius being increased or decreased. 
    Tuning the robot's turn radius was important to ensure that Frankenbot knew
    which plank he was passing at any given point in time.

    #### Send Agents Down the Zipline
    
    ![alt text](/img/portfolio/meetfrankenbot/zipline.png "zipline")  
    Once rescued from the tank, the six agents had to be freed from captivity
    by traveling down a metal rod.
    
    ##### Bucket
    
    **How we did it**
    
    ![alt text](/img/portfolio/meetfrankenbot/bucket.png "bucket")  
    Frankenbot has a yellow polypropylene bucket in which he places the agents as
    he rescues them out of the water tank. This bucket has a hook with ball bearings
    around a hollow aluminum rod, helping the bucket roll smoothly down the zipline.
    O-rings were used to hold the ball bearings in place.
    
    ##### Bucket Lifter
        
    [Click here](https://cad.onshape.com/documents/e98b69ac059f99b30a6500c9/w/1b042e790ec5e8dabe7a7bc1/e/caffcd26f576963c07f32388)
    to see the full design on Onshape
    
    **How we did it**  

    ![alt text](/img/portfolio/meetfrankenbot/winch1.png "first lifter prototype")  
    Frankenbot lifts the bucket onto the zipline using a winch mechanism consisting of a DC motor
    powered through an H-bridge circuit, and a pulley that is fastened to a rotating square shaft
    connected to the lifter arms.
    
    ![alt text](/img/portfolio/meetfrankenbot/winch2.png "second lifter prototype")  
    To detect the zipline, Frankenbot uses the two yellow polypropylene flaps
    at the end of the lifter arms, with a collision switch behind each.
    Frankenbot corrects his orientation relative to the zipline using these switches.
    
    **Main Challenges**
    
    ![alt text](/img/portfolio/meetfrankenbot/winch3.png "final lifter")  
    The initial torque calculations were done on a winch that had a 20% smaller diameter,
    so the first lifter prototype caused too much strain on the DC motor, which could only lift
    a maximum of four agents. We attempted to increase the diameter of the pulley,
    but this was limited by the arm that would rotate right above the pulley
    and by the overall height restriction of the robot. In the end, we were able to 
    lighten the load on the winch by exchanging the steel rod on the bucket hook with
    a hollow aluminum rod, thereby reducing the weight.

